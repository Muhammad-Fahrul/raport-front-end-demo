import{j as e,r as l,u as C,a as q,b as D,c as B,d as I,e as M,f as z,g as A,h as P}from"./index-DxVE8QtA.js";import{B as T,a as V}from"./ButtonIcon-B4eOcJdI.js";import{P as c}from"./index-D2FMU3-0.js";const f=({raport:t,handleDetail:s})=>e.jsxs("tr",{children:[e.jsx("td",{children:t.chapter}),e.jsx("td",{children:t.verse}),e.jsxs("td",{children:[t.status&&e.jsx("span",{className:"status success"}),!t.status&&e.jsx("span",{className:"status fail"})]}),e.jsx("td",{style:{cursor:"pointer"},onClick:()=>{s(t.id)},children:t.detail.split("").slice(0,6).join("")+"..."})]},t._id);f.propTypes={raport:c.object.isRequired,handleDetail:c.func.isRequired};const v=({setScreenNR:t,handleAdd:s})=>{const[d,h]=l.useState(""),[o,i]=l.useState(""),[u,j]=l.useState(""),[p,x]=l.useState(!0);return e.jsx("div",{className:"container-raport-new",children:e.jsxs("form",{className:"wrapper",onSubmit:a=>s(a,{chapter:d,verse:o,detail:u,status:p}),children:[e.jsx("span",{className:"close",onClick:()=>t(!1),children:"x"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("h3",{children:"New"})}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{name:"chapter",type:"number",required:"required",min:0,value:d,onChange:a=>h(a.target.value)}),e.jsx("span",{children:"Chapter"})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{name:"verse",type:"number",required:"required",min:0,value:o,onChange:a=>i(a.target.value)}),e.jsx("span",{children:"Verse"})]}),e.jsxs("div",{className:"inputBox",children:[e.jsx("input",{name:"detail",type:"text",required:"required",value:u,onChange:a=>j(a.target.value)}),e.jsx("span",{children:"detail"})]}),e.jsxs("div",{className:"input-status",children:[e.jsx("label",{htmlFor:"status",children:"Mengulang?"}),e.jsx("input",{id:"status",type:"checkbox",checked:!p,onChange:()=>{x(a=>!a)}})]}),e.jsx("button",{className:"enter",children:"Add"})]})})};v.propTypes={setScreenNR:c.func.isRequired,handleAdd:c.func.isRequired};const E="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0,0,256,256'%20width='48px'%20height='48px'%3e%3cg%20fill='%23fa5252'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.33333,5.33333)'%3e%3cpath%20d='M20.5,4c-0.49034,-0.00628%20-0.95279,0.22749%20-1.23848,0.62606c-0.28569,0.39856%20-0.35854,0.9116%20-0.19511,1.37394h-4.42578c-1.83725,0%20-3.5577,0.91945%20-4.57617,2.44922l-2.36719,3.55078h-0.19727c-0.54095,-0.00765%20-1.04412,0.27656%20-1.31683,0.74381c-0.27271,0.46725%20-0.27271,1.04514%200,1.51238c0.27271,0.46725%200.77588,0.75146%201.31683,0.74381h0.76367c0.12867,0.01945%200.25932,0.02208%200.38867,0.00781l2.47266,23.07813c0.29835,2.78234%202.67084,4.91406%205.46875,4.91406h14.81055c2.79791,0%205.1704,-2.13172%205.46875,-4.91406l2.47461,-23.07813c0.12677,0.01359%200.25475,0.01097%200.38086,-0.00781h0.77148c0.54095,0.00765%201.04412,-0.27656%201.31683,-0.74381c0.27271,-0.46725%200.27271,-1.04514%200,-1.51238c-0.27271,-0.46725%20-0.77588,-0.75146%20-1.31683,-0.74381h-0.19727l-2.36719,-3.55078c-1.01929,-1.52894%20-2.73955,-2.44922%20-4.57617,-2.44922h-4.42578c0.16343,-0.46234%200.09058,-0.97538%20-0.19511,-1.37394c-0.28569,-0.39856%20-0.74814,-0.63234%20-1.23848,-0.62606zM14.64063,9h18.71875c0.83737,0%201.61537,0.41622%202.08008,1.11328l1.25781,1.88672h-25.39453l1.25781,-1.88672c0.00065,-0.00065%200.0013,-0.0013%200.00195,-0.00195c0.46348,-0.69619%201.23938,-1.11133%202.07813,-1.11133zM11.66992,15h24.66016l-2.43945,22.76563c-0.13765,1.28366%20-1.19624,2.23438%20-2.48633,2.23438h-14.81055c-1.29009,0%20-2.34673,-0.95071%20-2.48437,-2.23437z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",N=({studentId:t,raport:s,setScreen:d,handleDelete:h})=>{const o=i=>{i.target.className==="container-raport-detail"&&d(!1)};return e.jsx("div",{className:"container-raport-detail",onClick:o,children:e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Detail"}),e.jsx("button",{className:"delete",onClick:()=>h({id:s.id,studentId:t}),children:e.jsx("img",{src:E})})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Chapter: ",s.chapter]}),e.jsxs("p",{children:["Verse: ",s.verse]}),s.status&&e.jsx("p",{className:"success",children:"Lulus"}),!s.status&&e.jsx("p",{className:"failed",children:"Mengulang"})]}),e.jsx("p",{children:s.detail})]})})};N.propTypes={studentId:c.number.isRequired,raport:c.object.isRequired,setScreen:c.func.isRequired,handleDelete:c.func.isRequired};const _=()=>{const[t,s]=l.useState(!1),[d,h]=l.useState({}),[o,i]=l.useState(!1),u=C(),j=q(),p=D(),{username:x}=B(),a=I(),r=M(n=>z(n,x)),b=n=>{const m=r.raport.find(g=>g.id===+n);h(m),s(!0)},R=async(n,m)=>{n.preventDefault();const S=r.raport.length+1;u(A({studentId:r.id,id:S,...m})),alert("Record baru berhasil ditambahkan"),i(!1)},k=n=>{confirm("anda yakin ingin menghapus record ini?")&&(u(P(n)),alert("Record berhasil dihapus"),s(!1))},y=p.state&&p.state.from.pathname;let w=r!=null&&r.raport.length?r.raport.map(n=>e.jsx(f,{raport:n,handleDetail:b},n.id)):null;return e.jsxs("div",{className:"container-raport",children:[e.jsxs("div",{className:"top",children:[e.jsxs("h1",{className:"username",children:[e.jsx("span",{children:x})," record"]}),e.jsx("button",{className:"back",onClick:()=>j(y,{replace:!0}),children:e.jsx("p",{children:"<"})})]}),e.jsxs("table",{className:"table-raport",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Chapter"}),e.jsx("th",{children:"Verse"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Detail"})]})}),e.jsx("tbody",{children:w})]}),t&&e.jsx(N,{raport:d,studentId:r.id,setScreen:s,handleDelete:k}),o&&e.jsx(v,{studentId:r.id,setScreenNR:i,handleAdd:R}),(a==null?void 0:a.isMentor)&&e.jsx("div",{onClick:()=>i(!0),children:e.jsx(T,{text:"NEW",children:e.jsx("img",{src:V})})})]})};export{_ as default};
